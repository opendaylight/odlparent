{
  "comments": [
    {
      "key": {
        "uuid": "53fc27d3_cfc0c9d5",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 5867
      },
      "writtenOn": "2018-08-13T20:02:43Z",
      "side": 0,
      "message": "Whoa... hang on a sec now - won\u0027t this just completely break any existing BP XML which is manually been put into org/opendaylight/blueprint in many modules in many projects?\n\nMore importantly, our custom BP Extender is not going kick in anymore, to read and process the custom ODL BP XML extension elements - because we look only in \"org/opendaylight/blueprint/ in https://github.com/opendaylight/controller/blob/a6af137c30470b86d4bc624d4c48cb686495a182/opendaylight/blueprint/src/main/java/org/opendaylight/controller/blueprint/BlueprintBundleTracker.java\n\nOr was this change meant to go together with a change to BlueprintBundleTracker in controller?  And a magical UNIX command moving all existing hand written BP XML for all projects when they adopt odlparent 4 ?  Then I could be fine with it.\n\nBut https://lists.opendaylight.org/pipermail/odlparent-dev/2018-August/001915.html seems easier, to me.",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "88e6b2dc_a32baa90",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 649
      },
      "writtenOn": "2018-08-13T20:09:58Z",
      "side": 0,
      "message": "Obviously the change, if okayed by Tom, will become part of MRI integration patch, just like mockito integration and other times -- I thought that much was completely obvious.",
      "parentUuid": "53fc27d3_cfc0c9d5",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "56b48f2f_0ded50f5",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 1842
      },
      "writtenOn": "2018-08-13T20:25:00Z",
      "side": 0,
      "message": "\u003e Whoa... hang on a sec now - won\u0027t this just completely break any\n \u003e existing BP XML which is manually been put into org/opendaylight/blueprint\n \u003e in many modules in many projects?\n \u003e \n \u003e More importantly, our custom BP Extender is not going kick in\n \u003e anymore, to read and process the custom ODL BP XML extension\n \u003e elements - because we look only in \"org/opendaylight/blueprint/ in\n \u003e https://github.com/opendaylight/controller/blob/a6af137c30470b86d4bc624d4c48cb686495a182/opendaylight/blueprint/src/main/java/org/opendaylight/controller/blueprint/BlueprintBundleTracker.java\n\nIf the generated BP XML is put in the standard OSGI-INF dir then the Aries bundle tracker will deploy it.\n\n \u003e \n \u003e Or was this change meant to go together with a change to\n \u003e BlueprintBundleTracker in controller?  And a magical UNIX command\n \u003e moving all existing hand written BP XML for all projects when they\n \u003e adopt odlparent 4 ?  Then I could be fine with it.\n\nWe can leave the BlueprintBundleTracker as is to handle backwards compatibility. We just need to change the BlueprintBundleTracker to also look in the standard OSGI-INF dir when handling a restart. \n\n \u003e \n \u003e But https://lists.opendaylight.org/pipermail/odlparent-dev/2018-August/001915.html\n \u003e seems easier, to me.",
      "parentUuid": "53fc27d3_cfc0c9d5",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ee28dfc4_431b017c",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 5867
      },
      "writtenOn": "2018-08-13T20:26:21Z",
      "side": 0,
      "message": "I am opposed to this change going into odlparent without first seeing it together with a change to BlueprintBundleTracker in controller (and documentation for how projects will upgrade).",
      "parentUuid": "88e6b2dc_a32baa90",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fcb6eab9_c7394549",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 1842
      },
      "writtenOn": "2018-08-14T01:24:59Z",
      "side": 0,
      "message": "I don\u0027t think a change is needed in BlueprintBundleTracker for this change however I think we should understand if/how this change could affect/break downstream projects.",
      "parentUuid": "ee28dfc4_431b017c",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d2afe26e_0be98600",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 5867
      },
      "writtenOn": "2018-08-14T13:03:10Z",
      "side": 0,
      "message": "But without this line, the auto generated BP XML will go into \"OSGI-INF/blueprint/\" instead.  And hand-written ones will remain in org/opendaylight/blueprint.  Therefore they won\u0027t be loaded by the same extender.  Which won\u0027t work.  That was the whole point of why we had the antrun in th first place.  And just moving the hand-written ones from src/main/resources/org/opendaylight/blueprint to OSGI-INF/blueprint won\u0027t work either - because then they will be loaded by the standard BP extender, not by our (your!) custom ODL one - so any RPC and what not extension tags will be ignored.\n\nHow about we stop arguing here and at least pretend like we actually are real engineers and just run builds for changes we make to detect impacts, and actually see failures?  (I cannot participate anymore in this \"hey let\u0027s break some stuff in odlparent and then when projects bump somehow the impacts will be dealt with\" way of working.)",
      "parentUuid": "fcb6eab9_c7394549",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "31ed9838_38787616",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 1842
      },
      "writtenOn": "2018-08-14T13:24:27Z",
      "side": 0,
      "message": "\u003e But without this line, the auto generated BP XML will go into\n \u003e \"OSGI-INF/blueprint/\" instead.  And hand-written ones will remain\n \u003e in org/opendaylight/blueprint.  Therefore they won\u0027t be loaded by\n \u003e the same extender.  Which won\u0027t work.  That was the whole point of\n \u003e why we had the antrun in th first place.  \n\nyes - this would break downstream in that manner. We\u0027d need to first migrate downstream to OSGI-INF/blueprint.\n\n\u003e And just moving the\n \u003e hand-written ones from src/main/resources/org/opendaylight/blueprint\n \u003e to OSGI-INF/blueprint won\u0027t work either - because then they will be\n \u003e loaded by the standard BP extender, not by our (your!) custom ODL\n \u003e one - so any RPC and what not extension tags will be ignored.\n \u003e \n\nActually no - the custom BP tags are not related to the  BlueprintBundleTracker or whatever component/extender actually loads the XML. The only thing we\u0027d lose by using the standard OSGI-INF is the ability to restart blueprint containers (failed or otherwise). But this can easily be fixed by having BlueprintBundleTracker also look in OSGI-INF/blueprint (I\u0027ll push a patch for that first chance I get).\n\n \u003e How about we stop arguing here and at least pretend like we\n \u003e actually are real engineers and just run builds for changes we make\n \u003e to detect impacts, and actually see failures?  (I cannot\n \u003e participate anymore in this \"hey let\u0027s break some stuff in\n \u003e odlparent and then when projects bump somehow the impacts will be\n \u003e dealt with\" way of working.)\n\nI didn\u0027t think I was arguing and already agreed that this change should first be tested downstream (see my previous comment \"however I think we should understand if/how this change could affect/break downstream projects\").",
      "parentUuid": "d2afe26e_0be98600",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2d8eed63_ed489fbb",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 649
      },
      "writtenOn": "2018-08-20T08:19:03Z",
      "side": 0,
      "message": "for i in `find . -name \\*.xml | fgrep src/main/resources/org/opendaylight/blueprint`; do\n    olddir\u003d`dirname \"$i\"`\n    newdir\u003d`echo \"$olddir\" | sed s#org/opendaylight/blueprint#OSGI-INF/blueprint#`\n    mkdir -p \"$newdir\"\n    git mv \"$i\" \"$newdir\"\ndone\n\nis all that it takes to migrate downstreams.",
      "parentUuid": "d2afe26e_0be98600",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "21bff8c3_4c77cd8c",
        "filename": "odlparent/pom.xml",
        "patchSetId": 1
      },
      "lineNbr": 1295,
      "author": {
        "id": 5867
      },
      "writtenOn": "2018-08-20T14:57:56Z",
      "side": 0,
      "message": "Tom, so you are saying that with controller \"as-is\" (no code changes), custom BP tags will just be loaded from OSGI-INF/blueprint?  Cool.  Then I\u0027m just confused why we used to have problems related to all this in the first place.. like why did we have antrun at all, then?  Have any of you actually tested this in downstream projects like netvirt \u0026 Co. using blueprint-maven-plugin now?  Tell you what, I won\u0027t -1 anymore, but abstain from +1.  If Stephen is confident to +1 this, I don\u0027t want to stand in the way.",
      "parentUuid": "31ed9838_38787616",
      "revId": "ad7d94ef31c334d26b1dcc744d436d5d382e266c",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}