--- target/assembly/bin/inc.orig	2021-03-09 19:35:09.706691724 +0100
+++ target/assembly/bin/inc	2021-03-09 22:46:04.265424764 +0100
@@ -190,7 +190,7 @@
     fi

     if [ "x${JAVA_HOME}" = "x" ] && [ "${darwin}" = "true" ]; then
-        JAVA_HOME="`/usr/libexec/java_home -v 1.8`"
+        JAVA_HOME="`/usr/libexec/java_home -v 11`"
     fi
     if [ "x${JAVA_HOME}" = "x" ] && [ -r /etc/gentoo-release ] ; then
         JAVA_HOME=`java-config --jre-home`
@@ -243,9 +243,9 @@

     VERSION=`"${JAVA}" -version 2>&1 | ${AWK} -F '"' '/version/ {print $2}' | sed -e 's/_.*//g; s/^1\.//g; s/\..*//g; s/-.*//g;'`

-    # java must be at least version 8
-    if [ "${VERSION}" -lt "8" ]; then
-        die "JVM must be greater than 1.8"
+    # java must be at least version 11
+    if [ "${VERSION}" -lt "11" ]; then
+        die "JVM must be at least 11"
     fi
 }

@@ -282,11 +282,20 @@
 setupDefaults() {

     DEFAULT_JAVA_OPTS="-XX:+UnlockDiagnosticVMOptions "
+    DEFAULT_JAVA_OPTS="$DEFAULT_JAVA_OPTS -XX:+HeapDumpOnOutOfMemoryError"
+    DEFAULT_JAVA_OPTS="$DEFAULT_JAVA_OPTS -XX:+DisableExplicitGC"

     setupVendorSepcifics

     DEFAULT_JAVA_OPTS="${DEFAULT_JAVA_OPTS} ${JAVA_VENDOR_OPTS}"

+    # Add default security file option
+    if [ "x$ODL_JAVA_SECURITY_PROPERTIES" != "x" ]; then
+        DEFAULT_JAVA_OPTS="-Djava.security.properties="${ODL_JAVA_SECURITY_PROPERTIES}" $DEFAULT_JAVA_OPTS"
+    else
+        DEFAULT_JAVA_OPTS="-Djava.security.properties="${KARAF_ETC}/odl.java.security" $DEFAULT_JAVA_OPTS"
+    fi
+
     DEFAULT_JAVA_DEBUG_PORT="5005"
     if [ "x${JAVA_DEBUG_PORT}" = "x" ]; then
         JAVA_DEBUG_PORT="${DEFAULT_JAVA_DEBUG_PORT}"
